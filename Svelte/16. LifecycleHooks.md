# Lifecycle Hooks

在 Svelte 5 中，組件生命週期僅由兩部分組成：創建和銷燬。中間的一切，比如當某些狀態更新時，與整個組件無關，只有需要對狀態變化做出響應的部分才會得到通知。

## onMount
`onMount` 函數傳入一個回調函數，在組件掛載到 DOM 後立即運行。它必須在組件初始化期間被調用（但不需要位於組件內部；可以從外部模塊調用）。

`onMount` 不會在服務端渲染的組件中運行。

```svelte
<script>
  import { onMount } from 'svelte';

  onMount(() => {
    console.log('組件已掛載');
  });
</script>
```

`onMount` 返回一個函數，它將在組件卸載時被調用。
```svelte
<script>
  import { onMount } from 'svelte';

  onMount(() => {
    const interval = setInterval(() => {
      console.log('beep');
    }, 1000);

    return () => clearInterval(interval);
  });
</script>
```

## onDestroy
在組件卸載前立即運行。

在 `onMount`、`beforeUpdate`、`afterUpdate` 和 `onDestroy` 中，這是唯一一個在服務端組件內運行的。

```svelte
<script>
  import { onDestroy } from 'svelte';

  onDestroy(() => {
    console.log('組件正在被銷燬');
  });
</script>
```

## tick
雖然沒有"更新後"鈎子，但你可以使用 `tick` 來確保在繼續之前 UI `已更新。tick` 返回一個 `promise`，該 `promise` 在所有待處理的狀態更改被應用後 resolve，如果沒有待處理的狀態更改，則在下一個微任務中 resolve。
```svelte
<script>
  import { tick } from 'svelte';

  $effect.pre(() => {
    console.log('组件即将更新');
    tick().then(() => {
        console.log('组件刚刚更新');
    });
  });
</script>
```

## 已廢棄：beforeUpdate / afterUpdate
Svelte 4 有兩個在組件整體更新前後運行的鈎子。為了向後兼容，這些鈎子在 Svelte 5 中被模擬實現，但在使用符文的組件中不可用。