# TemplateSyntax
- [use]()
- []()

## use
Actions（動作）是在元素掛載時調用的函數。它們通過 `use:` 指令添加，通常會使用 `$effect` 以便在元素卸載時重置任何狀態：
```svelte
<script>
  /** @type {import('svelte/action').Action} */
  function myAction(node) {
    // 節點已被掛載到 DOM 中

    $effect(() => {
      // 這裏進行設置

      return () => {
        // 這裏進行清理
      };
    });
  }
</script>

<div use:myAction>...</div>
```

action 可以帶參數調用。
```svelte
<script>
  /** @type {import('svelte/action').Action} */
  function myaction(node, data) {
    // ...
  }
</script>

<div use:myaction={data}>...</div>
```

action 只會調用一次（但在服務端渲染期間不會調用）—— 即使參數發生變化也不會再次運行。

> `$effect` 符文出現之前，action 可以返回一個帶有 `update` 和 `destroy` 方法的對象，如果參數發生變化，`update` 將被調用並使用最新的參數值。現在推薦使用 `$effect`。

### Typing
`Action` 接口接收三個可選的類型參數 —— 節點類型（可以是 `Element`，如果 action 適用於所有元素）、參數，以及由 action 創建的任何自定義事件處理程序：
```svelte
<script>
  import { on } from 'svelte/events';

  /**
   * @type {import('svelte/action').Action<
   * 	HTMLDivElement,
   * 	null,
   * 	{
   * 	   onswiperight: (e: CustomEvent) => void;
   * 	   onswipeleft: (e: CustomEvent) => void;
   * 		// ...
   * }>}
   */
  function gestures(node) {
    $effect(() => {
      // ...
      node.dispatchEvent(new CustomEvent('swipeleft'));

      // ...
      node.dispatchEvent(new CustomEvent('swiperight'));
    });
  }
</script>

<div
  use:gestures
  onswipeleft={next}
  onswiperight={prev}
>...</div>
```
